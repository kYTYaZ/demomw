/*
 * FilePondPluginImageCrop 2.0.0
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */
const isImage=e=>/^image/.test(e.type);var plugin$1=e=>{const{addFilter:t,utils:o}=e,{Type:r,isFile:a,getNumericAspectRatioFromString:i}=o,n=(e,t)=>!(!isImage(e.file)||!t("GET_ALLOW_IMAGE_CROP")),s=e=>"object"==typeof e,p=e=>"number"==typeof e,c=(e,t)=>e.setMetadata("crop",Object.assign({},e.getMetadata("crop"),t));return t("DID_CREATE_ITEM",(e,{query:t})=>{e.extend("setImageCrop",o=>{if(n(e,t)&&s(center))return e.setMetadata("crop",o),o}),e.extend("setImageCropCenter",o=>{if(n(e,t)&&s(o))return c(e,{center:o})}),e.extend("setImageCropZoom",o=>{if(n(e,t)&&p(o))return c(e,{zoom:Math.max(1,o)})}),e.extend("setImageCropRotation",o=>{if(n(e,t)&&p(o))return c(e,{rotation:o})}),e.extend("setImageCropFlip",o=>{if(n(e,t)&&s(o))return c(e,{flip:o})}),e.extend("setImageCropAspectRatio",o=>{if(!n(e,t)||void 0===o)return;const r=e.getMetadata("crop"),a=i(o),s={center:{x:.5,y:.5},flip:r?Object.assign({},r.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:a};return e.setMetadata("crop",s),s})}),t("DID_LOAD_ITEM",(e,{query:t})=>new Promise((o,r)=>{const n=e.file;if(!a(n)||!isImage(n)||!t("GET_ALLOW_IMAGE_CROP"))return o(e);if(e.getMetadata("crop"))return o(e);const s=t("GET_IMAGE_CROP_ASPECT_RATIO");e.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:s?i(s):null}),o(e)})),{options:{allowImageCrop:[!0,r.BOOLEAN],imageCropAspectRatio:[null,r.STRING]}}};const isBrowser="undefined"!=typeof window&&void 0!==window.document;isBrowser&&document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:plugin$1}));export default plugin$1;